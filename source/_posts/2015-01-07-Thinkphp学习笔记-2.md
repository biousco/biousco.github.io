title: Thinkphp学习笔记(2)
date: 2015-01-08 21:40:01
categories: 知识积累
tags: [Thinkphp,Gee!Jee!]
description: 参加社团比赛然后写的一个作品。一个大大坑。
---
## 3.主页作品展示模块
* foreach不能直接修改数组的内容，如果要修改使用(引用传递)：
```php
foreach ($list as $key => &$value)
```
* html文件内容只需要写一个li就可以了，使用`<volist name="" id="" ></volist>`来调用后台数据。
* 如果html文件是用`<ul><li>`来展示图片，`<volist>`标签要放到`<ul>`后`<li>`前;如果是div布局，放在div前。分页数字使用$page.
* 把逻辑代码都整合到Model中，在控制器中调用。如果需要重复的代码，用A方法实例化控制器，再调用控制器的方法。当需要不同的参数时再设置传入的变量，还可以设置变量的默认值。

## 4.作品详情模块
* html中修改链接的地址：
```php
__URL__/buying?id=$vo.id 
```
使用get方法把作品的唯一id传递到控制器中。

* 注意不要混淆登陆信息与作品信息。当对一个一维数组进行foreach时可能造成乱码
* 按照相同原理进行数据的读取，赋值，渲染。

<!-- more -->

## 5.众筹模块
* 添加商品：
 * 数据表：添加字段存储众筹的id号码，用@分隔；
 * php中：使用两个函数：`array explode(string separator,string string,[int limit])`来分隔字符串： 
 
```php
$array = explode("@", $userinfo['geeid']);
```
 * 使用`bool in_array( mixed needle,array array[,bool strict])` 来在数组中搜索某个值：
 
 ```php
in_array($id, $array);
```

					 
## 6.上传头像
* 吸取教训，不要把存储的文件路径以及文件名分开（又或者在其他场景中有好处？）
* 对文件夹进行分类，使用上传类的属性确保业务逻辑的最佳。
